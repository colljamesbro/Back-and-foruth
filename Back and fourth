-- Variables
local player = game.Players.LocalPlayer
local runService = game:GetService("RunService")
local targetPlayer1, targetPlayer2
local moveSpeed = 50  -- Speed of movement
local direction = 1   -- To toggle between players (1 or -1)
local moveInterval = 2 -- Time to stay at each player before moving to the other

-- Function to find two random players (excluding the local player)
local function getRandomPlayers()
    local players = {}
    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= player then
            table.insert(players, p)
        end
    end

    -- Randomly select two players
    if #players > 1 then
        local selectedPlayers = {players[math.random(1, #players)], players[math.random(1, #players)]}
        -- Ensure both selected players are different
        if selectedPlayers[1] == selectedPlayers[2] then
            selectedPlayers[2] = players[math.random(1, #players)]
        end
        targetPlayer1 = selectedPlayers[1]
        targetPlayer2 = selectedPlayers[2]
    end
end

-- Function to move between two players
local function moveBetweenPlayers()
    if targetPlayer1 and targetPlayer2 then
        local targetPosition = (direction == 1) and targetPlayer1.Character and targetPlayer1.Character:FindFirstChild("HumanoidRootPart").Position or targetPlayer2.Character and targetPlayer2.Character:FindFirstChild("HumanoidRootPart").Position
        
        if targetPosition then
            -- Move the local player toward the target position
            local humanoidRootPart = player.Character:FindFirstChild("HumanoidRootPart")
            if humanoidRootPart then
                humanoidRootPart.CFrame = CFrame.new(humanoidRootPart.Position:Lerp(targetPosition, moveSpeed * runService.RenderStepped:Wait()))
            end
        end
        
        -- Toggle direction after the interval
        wait(moveInterval)
        direction = -direction  -- Flip direction
    end
end

-- Initialize the random players
getRandomPlayers()

-- Start the movement between players
runService.RenderStepped:Connect(function()
    moveBetweenPlayers()
end)
